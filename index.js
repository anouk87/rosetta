const dataToDisplay = [
  {
    title: "Charles University in the Middle Ages",
    description:
      "This volume includes twenty-one studies on the history of the University of Prague in the 14th to 16th centuries. Focusing upon the Faculty of Liberal Arts, the book deals with the academic learning, mainly from a doctrinal point of view.",
    link:
      "http://books.google.de/books?id=ehIheGHsZKcC&pg=PA214&dq=charles&hl=&cd=1&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=ehIheGHsZKcC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: ["František Šmahel"],
    publisher: "BRILL",
    published: "2007",
    pageCount: 635,
  },
  {
    title: "Charles I",
    description:
      "Charles I was a complex man whose career intersected with some of the most dramatic events in English history. He played a central role in provoking the English Civil War, and his execution led to the only republican government Britain has ever known. Historians have struggled to get him into perspective, veering between outright condemnation and measured sympathy. Richard Cust shows that Charles I was not ‘unfit to be a king’, emphasising his strengths as a party leader and conviction politician, but concludes that, none the less, his prejudices and attitudes, and his mishandling of political crises did much to bring about a civil war in Britain. He argues that ultimately, after the war, Charles pushed his enemies into a position where they had little choice but to execute him.",
    link:
      "http://books.google.de/books?id=ZU_JAwAAQBAJ&pg=PT41&dq=charles&hl=&cd=2&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=ZU_JAwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: ["Richard Cust"],
    publisher: "Routledge",
    published: "2014-06-11",
    pageCount: 512,
  },
  {
    title: "Charles Taylor",
    description:
      "Charles Taylor is a distinctive figures in contemporary philosophy. In a time of increasing specialization Taylor contributes to areas of philosophical conversation across a wide spectrum of ideas including moral theory, theories of subjectivity, political theory, epistemology, hermeneutics, philosophy of mind, philosophy of language and aesthetics. His most recent writings have seen him branching into the study of religion. Written by a team of international authorities, this collection will be read primarily by students and professionals in philosophy, political science, religious studies, but will appeal to a broad swathe of professionals across the humanities and social sciences.",
    link:
      "http://books.google.de/books?id=WXm2NF-TXrgC&pg=PA29&dq=charles&hl=&cd=3&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=WXm2NF-TXrgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "Ruth Abbey and others 2",
    publisher: "Cambridge University Press",
    published: "2004-01-26",
    pageCount: 220,
  },
  {
    title: "The Charles Ives Tunebook",
    description:
      "A thorough revision of the standard catalog of Ives's borrowed tunes",
    link:
      "http://books.google.de/books?id=_HJcslCuesAC&pg=PA363&dq=charles&hl=&cd=4&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=_HJcslCuesAC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: ["Clayton W. Henderson"],
    publisher: "Indiana University Press",
    published: "2008",
    pageCount: 393,
  },
  {
    title: "Michael Ray Charles, 1989-1997",
    description:
      "Michael Ray Charles is a painter whose carefully crafted and faux-aged canvases and works on paper draw attention to race relations historically and in contemporary society. Borrowing pop culture images of characters such as Sambo, Buckwheat, and Aunt Jemima, Charles uses them ironically to comment on racial issues. His concerns range from how tobacco and liquor companies target marketing to minorities to the depiction of African Americans in the entertainment and sports industries to concepts of all-American (i.e., white) beauty. This book is the catalog of the first major solo exhibition of Charles' work, staged by Blaffer Gallery, the Art Museum of the University of Houston. It contains a broad range of color images of paintings and works on paper. In addition to the catalog entries, the book contains an interview between exhibit curator Don Bacigalupi, catalog essayist Marilyn Kern-Foxworth, and artist Michael Ray Charles, in which the artist discusses and interprets his work. An essay by writer and cultural historian Marilyn Kern-Foxworth situates Charles' work within contemporary African American culture.",
    link:
      "http://books.google.de/books?id=INJ9pJ_fnrMC&pg=PT16&dq=charles&hl=&cd=5&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=INJ9pJ_fnrMC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: ["Michael Ray Charles"],
    publisher: "University of Texas Press",
    published: "1997",
    pageCount: 30,
  },
  {
    title: "The Mathematical Work of Charles Babbage",
    description:
      "This book describes Babbage's work on the design and implementation of the difference and analytical engines.",
    link:
      "http://books.google.de/books?id=gkWunaISTsgC&pg=PA220&dq=charles&hl=&cd=6&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=gkWunaISTsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. M. Dubbey and other 1",
    publisher: "Cambridge University Press",
    published: "2004-02-12",
    pageCount: 244,
  },
  {
    title: "Charles Ives and His World",
    description:
      "This volume shows Charles Ives in the context of his world in a number of revealing ways. Five new essays examine Ives's relationships to European music and to American music, politics, business, and landscape. J. Peter Burkholder shows Ives as a composer well versed in four distinctive musical traditions who blended them in his mature music. Leon Botstein explores the paradox of how, in the works of Ives and Mahler, musical modernism emerges from profoundly antimodern sensibilities. David Michael Hertz reveals unsuspected parallels between one of Ives's most famous pieces, the Concord Piano Sonata, and the piano sonatas of Liszt and Scriabin. Michael Broyles sheds new light on Ives's political orientation and on his career in the insurance business, and Mark Tucker shows the importance for Ives of his vacations in the Adirondacks and the representation of that landscape in his music. The remainder of the book presents documents that illuminate Ives's personal life. A selection of some sixty letters to and from Ives and his family, edited and annotated by Tom C. Owens, is the first substantial collection of Ives correspondence to be published. Two sections of reviews and longer profiles published during his lifetime highlight the important stages in the reception of Ives's music, from his early works through the premieres of his most important compositions to his elevation as an almost mythic figure with a reputation among some critics as America's greatest composer.",
    link:
      "http://books.google.de/books?id=3zelh6aoP-sC&pg=PA118&dq=charles&hl=&cd=7&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=3zelh6aoP-sC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. F. Burkholder and other 1",
    publisher: "Princeton University Press",
    published: "1996",
    pageCount: 452,
  },
  {
    title: "The Northern Stories of Charles W. Chesnutt",
    description:
      "The first African American fiction writer to earn a national reputation, Charles W. Chesnutt remains best known for his depictions of Southern life before and after the Civil War. But he also produced a large body of what might best be called his RNorthernS writings, and those works, taken together, describe the intriguing ways in which America was reshaping itself at the turn of the last century.",
    link:
      "http://books.google.de/books?id=8zBC1-R_5cUC&pg=PT97&dq=charles&hl=&cd=8&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=8zBC1-R_5cUC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "Charles Waddell Chesnutt and other 1",
    publisher: "Ohio University Press",
    published: "2004",
    pageCount: 262,
  },
  {
    title: "The Mathematical Work of Charles Babbage",
    description:
      "This book describes Babbage's work on the design and implementation of the difference and analytical engines.",
    link:
      "http://books.google.de/books?id=gkWunaISTsgC&pg=PA220&dq=charles&hl=&cd=6&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=gkWunaISTsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. M. Dubbey and other 1",
    publisher: "Cambridge University Press",
    published: "2004-02-12",
    pageCount: 244,
  },
  {
    title: "Charles Ives and His World",
    description:
      "This volume shows Charles Ives in the context of his world in a number of revealing ways. Five new essays examine Ives's relationships to European music and to American music, politics, business, and landscape. J. Peter Burkholder shows Ives as a composer well versed in four distinctive musical traditions who blended them in his mature music. Leon Botstein explores the paradox of how, in the works of Ives and Mahler, musical modernism emerges from profoundly antimodern sensibilities. David Michael Hertz reveals unsuspected parallels between one of Ives's most famous pieces, the Concord Piano Sonata, and the piano sonatas of Liszt and Scriabin. Michael Broyles sheds new light on Ives's political orientation and on his career in the insurance business, and Mark Tucker shows the importance for Ives of his vacations in the Adirondacks and the representation of that landscape in his music. The remainder of the book presents documents that illuminate Ives's personal life. A selection of some sixty letters to and from Ives and his family, edited and annotated by Tom C. Owens, is the first substantial collection of Ives correspondence to be published. Two sections of reviews and longer profiles published during his lifetime highlight the important stages in the reception of Ives's music, from his early works through the premieres of his most important compositions to his elevation as an almost mythic figure with a reputation among some critics as America's greatest composer.",
    link:
      "http://books.google.de/books?id=3zelh6aoP-sC&pg=PA118&dq=charles&hl=&cd=7&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=3zelh6aoP-sC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. F. Burkholder and other 1",
    publisher: "Princeton University Press",
    published: "1996",
    pageCount: 452,
  },
  {
    title: "The Mathematical Work of Charles Babbage",
    description:
      "This book describes Babbage's work on the design and implementation of the difference and analytical engines.",
    link:
      "http://books.google.de/books?id=gkWunaISTsgC&pg=PA220&dq=charles&hl=&cd=6&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=gkWunaISTsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. M. Dubbey and other 1",
    publisher: "Cambridge University Press",
    published: "2004-02-12",
    pageCount: 244,
  },
  {
    title: "Charles Ives and His World",
    description:
      "This volume shows Charles Ives in the context of his world in a number of revealing ways. Five new essays examine Ives's relationships to European music and to American music, politics, business, and landscape. J. Peter Burkholder shows Ives as a composer well versed in four distinctive musical traditions who blended them in his mature music. Leon Botstein explores the paradox of how, in the works of Ives and Mahler, musical modernism emerges from profoundly antimodern sensibilities. David Michael Hertz reveals unsuspected parallels between one of Ives's most famous pieces, the Concord Piano Sonata, and the piano sonatas of Liszt and Scriabin. Michael Broyles sheds new light on Ives's political orientation and on his career in the insurance business, and Mark Tucker shows the importance for Ives of his vacations in the Adirondacks and the representation of that landscape in his music. The remainder of the book presents documents that illuminate Ives's personal life. A selection of some sixty letters to and from Ives and his family, edited and annotated by Tom C. Owens, is the first substantial collection of Ives correspondence to be published. Two sections of reviews and longer profiles published during his lifetime highlight the important stages in the reception of Ives's music, from his early works through the premieres of his most important compositions to his elevation as an almost mythic figure with a reputation among some critics as America's greatest composer.",
    link:
      "http://books.google.de/books?id=3zelh6aoP-sC&pg=PA118&dq=charles&hl=&cd=7&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=3zelh6aoP-sC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. F. Burkholder and other 1",
    publisher: "Princeton University Press",
    published: "1996",
    pageCount: 452,
  },
  {
    title: "The Mathematical Work of Charles Babbage",
    description:
      "This book describes Babbage's work on the design and implementation of the difference and analytical engines.",
    link:
      "http://books.google.de/books?id=gkWunaISTsgC&pg=PA220&dq=charles&hl=&cd=6&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=gkWunaISTsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. M. Dubbey and other 1",
    publisher: "Cambridge University Press",
    published: "2004-02-12",
    pageCount: 244,
  },
  {
    title: "Charles Ives and His World",
    description:
      "This volume shows Charles Ives in the context of his world in a number of revealing ways. Five new essays examine Ives's relationships to European music and to American music, politics, business, and landscape. J. Peter Burkholder shows Ives as a composer well versed in four distinctive musical traditions who blended them in his mature music. Leon Botstein explores the paradox of how, in the works of Ives and Mahler, musical modernism emerges from profoundly antimodern sensibilities. David Michael Hertz reveals unsuspected parallels between one of Ives's most famous pieces, the Concord Piano Sonata, and the piano sonatas of Liszt and Scriabin. Michael Broyles sheds new light on Ives's political orientation and on his career in the insurance business, and Mark Tucker shows the importance for Ives of his vacations in the Adirondacks and the representation of that landscape in his music. The remainder of the book presents documents that illuminate Ives's personal life. A selection of some sixty letters to and from Ives and his family, edited and annotated by Tom C. Owens, is the first substantial collection of Ives correspondence to be published. Two sections of reviews and longer profiles published during his lifetime highlight the important stages in the reception of Ives's music, from his early works through the premieres of his most important compositions to his elevation as an almost mythic figure with a reputation among some critics as America's greatest composer.",
    link:
      "http://books.google.de/books?id=3zelh6aoP-sC&pg=PA118&dq=charles&hl=&cd=7&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=3zelh6aoP-sC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. F. Burkholder and other 1",
    publisher: "Princeton University Press",
    published: "1996",
    pageCount: 452,
  },
  {
    title: "The Mathematical Work of Charles Babbage",
    description:
      "This book describes Babbage's work on the design and implementation of the difference and analytical engines.",
    link:
      "http://books.google.de/books?id=gkWunaISTsgC&pg=PA220&dq=charles&hl=&cd=6&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=gkWunaISTsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. M. Dubbey and other 1",
    publisher: "Cambridge University Press",
    published: "2004-02-12",
    pageCount: 244,
  },
  {
    title: "Charles Ives and His World",
    description:
      "This volume shows Charles Ives in the context of his world in a number of revealing ways. Five new essays examine Ives's relationships to European music and to American music, politics, business, and landscape. J. Peter Burkholder shows Ives as a composer well versed in four distinctive musical traditions who blended them in his mature music. Leon Botstein explores the paradox of how, in the works of Ives and Mahler, musical modernism emerges from profoundly antimodern sensibilities. David Michael Hertz reveals unsuspected parallels between one of Ives's most famous pieces, the Concord Piano Sonata, and the piano sonatas of Liszt and Scriabin. Michael Broyles sheds new light on Ives's political orientation and on his career in the insurance business, and Mark Tucker shows the importance for Ives of his vacations in the Adirondacks and the representation of that landscape in his music. The remainder of the book presents documents that illuminate Ives's personal life. A selection of some sixty letters to and from Ives and his family, edited and annotated by Tom C. Owens, is the first substantial collection of Ives correspondence to be published. Two sections of reviews and longer profiles published during his lifetime highlight the important stages in the reception of Ives's music, from his early works through the premieres of his most important compositions to his elevation as an almost mythic figure with a reputation among some critics as America's greatest composer.",
    link:
      "http://books.google.de/books?id=3zelh6aoP-sC&pg=PA118&dq=charles&hl=&cd=7&source=gbs_api",
    imgLink:
      "http://books.google.com/books/content?id=3zelh6aoP-sC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",
    author: "J. F. Burkholder and other 1",
    publisher: "Princeton University Press",
    published: "1996",
    pageCount: 452,
  },
];

const elements = {
  searchQuery: document.querySelector(".search-field"),
  orderBy: document.querySelector(".order-by"),
  searchType: document.querySelector(".select-type"),
  filterLanguages: document.querySelector(".search-languages"),
  booksContainer: document.querySelector(".container-books"),
  result: document.querySelector(".result"),
  fetchBtn: document.querySelector(".fetch-values"),
  container: document.querySelector(".container"),
  filters: document.querySelector(".filters"),
  buttonUp: document.querySelector(".button_up"),
  searchHeader: document.getElementById("header"),
  spanx: document.querySelector(".spanX"),
  navbar: document.querySelector(".header-nav"),
  pagination: document.querySelector(".pagination"),
};

const limitResults = (str, limit) => {
  const res = [];

  if (str.length > limit) {
    str.split(" ").reduce((acc, cur) => {
      if (acc + cur.length < limit) {
        res.push(cur);
      }
      return acc + cur.length;
    }, 0);
    return `${res.join(" ")}...`;
  }
  return str;
};

let current_page = 1; // starting page
let rows = 8;

function displayList(items, wrapper, rows_per_page, page) {
  wrapper.innerHTML = "";
  page--;
  let start = rows_per_page * page; // get the specific amount of item we need in each page
  let end = start + rows_per_page;
  let paginatedItems = items.slice(start, end); // to get an array out of the displayed items in each page

  // _________creating a div for each item _________________

  paginatedItems.forEach(item => {
    let {
      title,
      description,
      author,
      pageCount,
      imgLink,
      link,
      published,
      publisher,
    } = item;

    let markUp = `
      <div class="quote">
        <h3>${limitResults(title, 20)}</h3>
        <h6>${author} - <span>${pageCount} pages</span></h6>
        <img class="img-box img1" src="${imgLink}" alt="${title}" />
        <p>
        ${limitResults(description, 300)}
        </p>
      </div>
    `;

    let item_element = document.createElement("div");
    item_element.classList.add("item"); // built in css
    item_element.innerHTML = markUp; //   value to display in each div
    wrapper.appendChild(item_element);
  });
}

// __________________ setteing page numbers _________________________

function setupPagination(items, wrapper, rows_per_page) {
  wrapper.innerHTML = "";

  let page_count = Math.ceil(items.length / rows_per_page); // number of pages depending on the ammount of data from API

  for (let i = 1; i < page_count + 1; i++) {
    let btn = paginationButton(i, items);
    wrapper.appendChild(btn);
  }
}

//___________________ Generat buttons to represent the number of the pages ______________________________

function paginationButton(page, items) {
  let button = document.createElement("button");
  button.innerText = page;

  button.addEventListener("click", () => {
    current_page = page;
    displayList(items, elements.booksContainer, rows, current_page);
  });

  return button;
}

displayList(dataToDisplay, elements.booksContainer, rows, current_page);
setupPagination(dataToDisplay, elements.pagination, rows);
